(function(a,b,c){"object"==typeof exports?module.exports=c(require):"function"==typeof define&&define.amd?define(c):b[a]=c()}).call(this,"BaseViewModel",this,function(a){"use strict";function b(a){var b=e.functions(a),c=e.omit(a,b);e.each(c,function(a,b){this[b]=e.isArray(a)?f.observableArray(a):f.observable(a)},this),e.each(b,function(b){this[b]=f.computed(a[b],this)},this)}function c(a){e.each(a,function(b,c){this[c]=a[c]},this)}function d(a,b){var c,d=this;c=a&&e.has(a,"constructor")?a.constructor:function(){return d.apply(this,arguments)},e.extend(c,d,b);var f=function(){this.constructor=c};return f.prototype=d.prototype,c.prototype=new f,a&&e.extend(c.prototype,a),c.__super__=d.prototype,c}var e="function"==typeof a?a("underscore"):window._,f="function"==typeof a?a("knockout"):window.ko;if("undefined"==typeof e||"undefined"==typeof f)throw new Error("BaseViewModel depends on underscore and knockout");var g=function(a,d){a=a||{},d=d||{},this._model=e.clone(a),b.call(this,this.defaults),b.call(this,a),c.call(this,d),this.init.call(this,arguments),this.el&&f.applyBindings(this,"object"==typeof this.el?this.el:document.querySelector(this.el)[0])};return e.extend(g.prototype,{init:function(){},toModel:function(){var a={},b=f.toJS(this._model);return e.extend(a,b),a},toJSON:function(){var a=this.toModel();return JSON.stringify(a)}}),g.extend=d,g});