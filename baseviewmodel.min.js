(function(a,b,c){"object"==typeof exports?module.exports=c(require):"function"==typeof define&&define.amd?define(c):b[a]=c()}).call(this,"BaseViewModel",this,function(a){"use strict";function b(a,b){var d,e=this;d=a&&c.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},c.extend(d,e,b);var f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,a&&c.extend(d.prototype,a),d.__super__=e.prototype,d}var c="function"==typeof a?a("underscore"):window._,d="function"==typeof a?a("ko"):window.ko;if("undefined"==typeof c||"undefined"==typeof d)throw new Error("BaseViewModel depends on underscore and knockout");var e=function(a,b){a=a||{},b=b||{},this._model=c.clone(a),f.call(this,this.defaults),f.call(this,a),g.call(this,b),this.init.call(this,arguments),this.el&&d.applyBindings(this,"object"==typeof this.el?this.el:document.querySelector(this.el)[0])};c.extend(e.prototype,{init:function(){},toModel:function(){var a={},b=d.toJS(this._model);return c.extend(a,b),a},toJSON:function(){var a=this.toModel();return JSON.stringify(a)}});var f=function(a){var b=c.functions(a),e=c.omit(a,b);c.each(e,function(a,b){this[b]=c.isArray(a)?d.observableArray(a):d.observable(a)},this),c.each(b,function(b){this[b]=d.computed(a[b],this)},this)},g=function(a){c.each(a,function(b,c){this[c]=a[c]},this)};return e.extend=b,e});